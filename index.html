<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game Control Panel</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="bg-gray-100">
    <div class="container mx-auto py-10">
        <h1 class="text-3xl font-bold mb-6">ä¸»æŒäººæ§åˆ¶é¢æ¿</h1>
        <div id="control-panel" class="bg-white shadow-lg rounded-lg p-6 mb-4">
            <h2 class="text-xl font-bold mb-2">å›åˆæ§åˆ¶</h2>
            <div class="flex items-center mb-4">
                <span class="mr-2">å›åˆï¼š</span>
                <input type="number" id="round-number" class="border border-gray-300 p-2 mr-2" value="0">
                <button id="round-plus" class="bg-blue-500 text-white px-4 py-2 mr-2">+</button>
                <button id="round-back" class="bg-red-500 text-white px-4 py-2">-</button>
            </div>
            <div class="flex items-center mb-4">
                <span class="mr-2">éšŠä¼ï¼š</span>
                <select id="team-select" class="border border-gray-300 p-2 mr-2">
                    <option value="ç´…">ç´…</option>
                    <option value="è—">è—</option>
                    <option value="é»ƒ">é»ƒ</option>
                </select>
                <span class="mr-2">ç·¨è™Ÿï¼š</span>
                <input type="number" id="player-number" class="border border-gray-300 p-2 mr-2" min="1" max="4">
                <span class="mr-2">ä½ç½®ï¼š</span>
                <input type="number" id="map-position" class="border border-gray-300 p-2">
                <button id="enter" class="bg-green-500 text-white px-4 py-2 ml-2">Enter</button>
            </div>
        </div>
        <div id="game-map" class="bg-gray-300 h-96 rounded-lg mb-4 relative overflow-hidden">
            <p>åœ°åœ–å€åŸŸ</p>
        </div>
        <div class="bg-white shadow-lg rounded-lg p-6">
            <h2 class="text-xl font-bold mb-2">èª¿æŸ¥èˆ‡æŠ“æ•</h2>
            <div class="flex items-center mb-4">
                <span class="mr-2">å°å·ç·¨è™Ÿï¼š</span>
                <select id="thief-select" class="border border-gray-300 p-2 mr-2">
                    <option value="1">1</option>
                    <option value="2">2</option>
                </select>
                <span class="mr-2">è¶³è·¡ä½ç½®ï¼š</span>
                <input type="number" id="thief-position" class="border border-gray-300 p-2 mr-2">
                <button id="record-thief" class="bg-yellow-500 text-white px-4 py-2">è¨˜éŒ„</button>
            </div>
            <div class="flex items-center mb-4">
                <button id="investigate" class="bg-purple-500 text-white px-4 py-2 mr-2">èª¿æŸ¥</button>
                <button id="capture" class="bg-red-600 text-white px-4 py-2">æŠ“æ•</button>
            </div>
        </div>
        <div class="bg-white shadow-lg rounded-lg p-6 mt-4">
            <h2 class="text-xl font-bold mb-2">éŠæˆ²è¨˜éŒ„</h2>
            <div id="log" class="h-48 overflow-y-scroll bg-gray-100 p-2"></div>
        </div>
    </div>

    <script>
        const logContainer = document.getElementById('log');
        const roundNumber = document.getElementById('round-number');
        const teamSelect = document.getElementById('team-select');
        const playerNumber = document.getElementById('player-number');
        const mapPosition = document.getElementById('map-position');
        const thiefSelect = document.getElementById('thief-select');
        const thiefPosition = document.getElementById('thief-position');
        const roundPlus = document.getElementById('round-plus');
        const roundBack = document.getElementById('round-back');
        const enterBtn = document.getElementById('enter');
        const recordThiefBtn = document.getElementById('record-thief');
        const investigateBtn = document.getElementById('investigate');
        const captureBtn = document.getElementById('capture');
        const gameMap = document.getElementById('game-map');

        let roundData = {};
        let thiefData = { '1': [], '2': [] };
        let playerElements = [];
        let thiefElements = [];

        function logMessage(message) {
            const p = document.createElement('p');
            p.textContent = message;
            logContainer.appendChild(p);
            logContainer.scrollTop = logContainer.scrollHeight;
        }

        function addMarker(position, type, color) {
            const marker = document.createElement('div');
            marker.className = `absolute w-6 h-6 rounded-full flex items-center justify-center text-white text-xs font-bold`;
            marker.style.backgroundColor = color;
            marker.style.left = `${position * 5}px`;
            marker.style.top = `${Math.random() * 300}px`;
            marker.textContent = type;
            marker.title = `ä½ç½®: ${position}`;
            gameMap.appendChild(marker);
            return marker;
        }

        roundPlus.addEventListener('click', () => {
            roundNumber.value = parseInt(roundNumber.value) + 1;
        });

        roundBack.addEventListener('click', () => {
            if (parseInt(roundNumber.value) > 0) {
                roundNumber.value = parseInt(roundNumber.value) - 1;
            }
        });

        enterBtn.addEventListener('click', () => {
            const round = roundNumber.value;
            const team = teamSelect.value;
            const player = playerNumber.value;
            const position = mapPosition.value;

            if (!roundData[round]) {
                roundData[round] = [];
            }

            roundData[round].push({ team, player, position });
            logMessage(`ğŸ“ ç¬¬ ${round} å›åˆ - éšŠä¼: ${team}, ç·¨è™Ÿ: ${player}, ä½ç½®: ${position}`);

            const marker = addMarker(position, `éšŠä¼ ${team} ç·¨è™Ÿ ${player}`, team === 'ç´…' ? 'red' : team === 'è—' ? 'blue' : 'yellow');
            playerElements.push(marker);
        });

        recordThiefBtn.addEventListener('click', () => {
            const thiefId = thiefSelect.value;
            const position = thiefPosition.value;

            thiefData[thiefId].push(position);
            logMessage(`ğŸ¦¹ å°å· ${thiefId} çš„è¶³è·¡ä½ç½®: ${position}`);

            const marker = addMarker(position, `å°å· ${thiefId}`, 'black');
            thiefElements.push(marker);
        });

        investigateBtn.addEventListener('click', () => {
            const round = roundNumber.value;
            const players = roundData[round] || [];

            players.forEach(({ team, player, position }) => {
                if (thiefData['1'].includes(position)) {
                    logMessage(`âš ï¸ éšŠä¼ ${team} ç·¨è™Ÿ ${player} æ‰¾åˆ°å°å· 1 çš„è¶³è·¡åœ¨ ${position}`);
                }
                if (thiefData['2'].includes(position)) {
                    logMessage(`âš ï¸ éšŠä¼ ${team} ç·¨è™Ÿ ${player} æ‰¾åˆ°å°å· 2 çš„è¶³è·¡åœ¨ ${position}`);
                }
            });
        });

        captureBtn.addEventListener('click', () => {
            const round = roundNumber.value;
            const players = roundData[round] || [];

            players.forEach(({ team, player, position }) => {
                const lastThief1 = thiefData['1'][thiefData['1'].length - 1];
                const lastThief2 = thiefData['2'][thiefData['2'].length - 1];

                if (position === lastThief1) {
                    logMessage(`ğŸ¯ éšŠä¼ ${team} ç·¨è™Ÿ ${player} æŠ“æ•æˆåŠŸ - å°å· 1 åœ¨ä½ç½® ${position}`);
                }
                if (position === lastThief2) {
                    logMessage(`ğŸ¯ éšŠä¼ ${team} ç·¨è™Ÿ ${player} æŠ“æ•æˆåŠŸ - å°å· 2 åœ¨ä½ç½® ${position}`);
                }
            });
        });
    </script>
</body>
</html>
